pipeline {
	agent any 

	stages {
	
		stage('Checkout') {
			steps {
				sh '''ls -la'''
				echo 'step Git Checkout'
			}
		}
		stage('Docker') {
			steps {
				script {
					prog = '$(ls *.py)'
					echo '$prog file'
					echo 'FROM python:lastest \n COPY ./$prog . \n ENTRYPOINT python $prog'> Dockerfile
					docker build .					
					dockerid= '$(docker build . | grep Successfully) | awk '{print $3}''
					echo $dockerid
					docker run $dockerid --name jenkinsdocker

				}
			}	
		}
	}
}

